!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).HoverZoom=e()}(this,function(){"use strict";return class{constructor(t={}){this.options={classNames:{container:"hoverzoom",image:"hoverzoom-image",zoomedImage:"hoverzoom-zoom",magnifier:"hoverzoom-magnifier",magnifierRound:"hoverzoom-magnifier--round",magnifierImage:"hoverzoom-magnifier--image"},position:"left",type:"outside",largeImage:"",blur:!1,grayscale:!1,...t},this.isSafari=/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||"undefined"!=typeof safari&&window.safari.pushNotification).toString()}init(){const t=document.getElementsByClassName(this.options.classNames.container);window.onload=()=>{for(let e=0;e<t.length;e++)this.applyHoverZoom(e,t[e])}}applyHoverZoom(t,e){const{image:o}=this.options.classNames,s=e.querySelector(`.${o}`);s.setAttribute("id",`${o}-${t}`);const i=s.dataset.largeImage?s.dataset.largeImage:s.src;"outside"===(s.dataset.type||this.options.type)?this.outsideZoom(t,s,i):this.insideZoom(t,s,i),this.addMouseListener(t,s)}outsideZoom(t,e,o){const{zoomedImage:s,magnifier:i,magnifierImage:a}=this.options.classNames,r=document.createElement("DIV");r.classList.add(s),r.setAttribute("id",`${s}-${t}`),r.style.setProperty("background-image",`url('${o}')`),r.style.setProperty("background-size",`${4*e.offsetWidth}px ${4*e.offsetHeight}px`);const n=e.dataset.position||this.options.position;e.parentNode.style.setProperty("flex-direction","left"===n?"row":"column"),this.attachZoomedImage(e,r);const d=document.createElement("DIV");d.classList.add(i),d.setAttribute("id",`${i}-${t}`);const p=document.createElement("IMG");p.classList.add(a),p.setAttribute("id",`${a}-${t}`),p.setAttribute("src",o),p.style.setProperty("height",e.offsetHeight),p.style.setProperty("width",e.offsetWidth),d.appendChild(p),e.parentNode.appendChild(d);const f=d.offsetHeight*e.offsetWidth/e.offsetHeight;d.style.setProperty("width",f)}attachZoomedImage(t,e){e.style.setProperty("height",t.offsetHeight),e.style.setProperty("width",t.offsetWidth);"left"===(t.dataset.position||this.options.position)?e.style.setProperty("margin-left",6):e.style.setProperty("margin-top",6),t.parentNode.appendChild(e)}insideZoom(t,e,o){const{magnifier:s,magnifierImage:i,magnifierRound:a}=this.options.classNames,r=document.createElement("DIV");r.classList.add(s),r.classList.add(a),r.setAttribute("id",`${s}-${t}`);const n=document.createElement("DIV");n.classList.add(i),n.setAttribute("id",`${i}-${t}`),n.style.setProperty("background-image",`url('${o}')`),n.style.setProperty("background-size",`${4*e.offsetWidth}px ${4*e.offsetHeight}px`),n.style.setProperty("height",e.offsetHeight),n.style.setProperty("width",e.offsetWidth),r.appendChild(n),e.parentNode.appendChild(r)}addMouseListener(t,e){const{magnifier:o,magnifierImage:s,zoomedImage:i}=this.options.classNames,a=document.getElementById(`${s}-${t}`),r=document.getElementById(`${o}-${t}`),{offsetHeight:n,offsetWidth:d}=r,p=document.getElementById(`${i}-${t}`),f=e.dataset.type||this.options.type;e.addEventListener("mousemove",t=>{let o="opacity(0.8)";(e.dataset.blur||this.options.blur)&&(o+=" blur(2px)"),(e.dataset.grayscale||this.options.grayscale)&&(o+=" grayscale(100%)"),e.style.setProperty("filter",o),r.style.setProperty("opacity",1),"outside"===f&&p.style.setProperty("opacity",1);const s=t.offsetX?t.offsetX:t.pageX-e.offsetLeft,i=t.offsetY?t.offsetY:t.pageY-e.offsetTop;let l,m;"outside"===f?(p.style.setProperty("background-position-x",3*-s+"px"),p.style.setProperty("background-position-y",3*-i+"px"),l=.5*d,m=-.52*n):(a.style.setProperty("background-position-x",3*-s+"px"),a.style.setProperty("background-position-y",3*-i+"px"),l=.5*d,m=-.51*n),r.style.setProperty("transform",`translate(${t.offsetX-l}px, ${t.offsetY+m}px)`),a.style.setProperty("transform",`translate(${-t.offsetX+d/2-1}px, ${-t.offsetY+n/2}px)`)}),e.addEventListener("mouseout",()=>{e.style.setProperty("filter","unset"),r.style.setProperty("opacity",0),"outside"===f&&p.style.setProperty("opacity",0)})}}});